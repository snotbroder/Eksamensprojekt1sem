---
import "../../styles/generel.css";
import MainLayout from "../../layouts/MainLayout.astro";
export async function getStaticPaths() {
  const data = await fetch("https://plcpwtguguiponmaikkt.supabase.co/rest/v1/kongshaugTable1", {
    method: "GET",
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsY3B3dGd1Z3VpcG9ubWFpa2t0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTU3ODMzNDMsImV4cCI6MjAzMTM1OTM0M30.F0THFO_2BDe8j-ZXrXcyfbczErZtlQ4nCo_MDcCMEVM",
    },
  }).then((response) => response.json());

  return data.map((vaerk) => {
    return {
      params: { slug: vaerk.slug },
      props: { myData: vaerk },
    };
  });
}
const { myData } = Astro.props;
console.log(myData);
---

<MainLayout>
  <div class="herowrapper">
    <div class="topleft">
      <p class="breadcrumb"><a href=`/${myData.type}`>{myData.type}</a> // <span class="placeholder">{myData.title}</span></p>
      <span class="backbuttoncontainer">
        <img class="arrow" src="/public/arrowleft.svg" alt="arrow" />
        <button onclick="goBack()"> <h3>back</h3></button>
      </span>
    </div>
    <img class="heroimage" src={myData.image} alt={myData.image_text} />
    <div class="herocontainer">
      <h1 class="displaytext">{myData.title}</h1>
      <h3>{myData.customer}, {myData.year}</h3>
    </div>
  </div>
  <p>{myData.description1}</p>
  <p>{myData.description2}</p>
  <p class="hyperlink">{myData.buttonTitle}</p>

  <img class="" src={myData.image1} alt={myData.image1_text} />
  <img class="" src={myData.image2} alt={myData.image2_text} />
  <img class="" src={myData.image3} alt={myData.image3_text} />
  <hr />
  <div class="flex">
    <a class="flexcontainer" href=""><img class="arrow" src="/public/arrowleft.svg" alt="arrow" /><h3>previous</h3></a>
    <a class="flexcontainer" href=""><h3>next</h3><img class="arrow" src="/public/arrowright.svg" alt="arrow" /></a>
  </div>
  <hr />
</MainLayout>

<style>
  .flex {
    display: flex;
    justify-content: space-between;
  }
  .flexcontainer {
    display: flex;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    gap: 1rem;
  }
  .flexcontainer h3 {
    margin: auto;
  }
  .flexcontainer img {
    width: 1rem;
    height: auto;
  }
</style>
<style>
  .herowrapper {
    display: grid;
    margin-left: -1rem;
    margin-right: -1rem;
  }
  .herowrapper img {
    object-fit: cover;
    height: 30rem;
    filter: brightness(0.8);
  }
  .heroimage,
  .herocontainer,
  .topleft,
  img {
    grid-area: 1/1;
  }

  .herocontainer {
    z-index: 10;
    margin-top: auto;
    margin-bottom: auto;
    margin-right: 1rem;
  }
  .herocontainer h1 {
    text-align: right;
    margin-bottom: 2rem;
  }
  .herocontainer h3 {
    text-align: right;
    margin-top: auto;
  }
  .topleft {
    z-index: 12;
    margin-left: 1rem;
  }
  .topleft .backbuttoncontainer {
    margin-left: 1rem;
    margin-top: 1rem;
    max-width: 10rem;
  }

  .topleft .arrow {
    width: 1rem;
    height: auto;

    transition: var(--unfocus);
  }
  span,
  .breadcrumb {
    display: flex;
    justify-content: start;
    gap: 0.5rem;
  }

  button {
    width: auto;

    background: transparent;
    border: none;
    padding: none;
  }
  .herowrapper p {
    z-index: 6;
  }

  span:hover .arrow {
    transform: translate(-1rem, 0px);
    transition: var(--focus);
  }
</style>

<script>
  function goBack() {
    console.log("back");
    window.history.back();
  }
</script>
